<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BeReal Museum (Posts)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; }
    header { padding: 16px 20px; border-bottom: 1px solid #ddd; display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    header h1 { margin: 0; font-size: 18px; }
    main { padding: 16px 20px; }
    .muted { color: #666; font-size: 13px; }
    .tabs { display:flex; gap: 8px; flex-wrap: wrap; margin: 12px 0; }
    .tab { border: 1px solid #ddd; padding: 8px 10px; border-radius: 999px; cursor: pointer; user-select:none; }
    .tab.active { background: #111; color:#fff; border-color:#111; }
    .btn { border:1px solid #ddd; background:#fff; padding:8px 10px; border-radius: 10px; cursor:pointer; }
    .btn:disabled { opacity: .5; cursor: not-allowed; }

    .tile { border-radius: 12px; overflow: hidden; border: 1px solid #eee; background: #fafafa; cursor: pointer; }
    .meta { padding: 10px; font-size: 12px; color:#444; display:flex; justify-content: space-between; gap: 8px; }
    .meta span { white-space: nowrap; overflow:hidden; text-overflow: ellipsis; }
    .frame { position: relative; width: 100%; height: 240px; background:#000; }
    .frame img.back { width: 100%; height: 100%; object-fit: cover; display:block; }
    .frame img.front {
      position: absolute; right: 10px; bottom: 10px;
      width: 80px; height: 108px; object-fit: cover;
      border-radius: 12px; border: 2px solid rgba(255,255,255,.95);
      box-shadow: 0 8px 18px rgba(0,0,0,.35);
      background: #222;
    }

    #mosaicWrap { border: 1px solid #ddd; border-radius: 12px; overflow:hidden; }
    #mosaic { width: 100%; height: 72vh; display:block; background:#111; touch-action: none; }
    .row { display:flex; gap: 10px; flex-wrap: wrap; align-items:center; }

    #favoritesStrip, #timelineStrip {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      padding: 6px 2px 12px;
      scroll-snap-type: x mandatory;
    }
    .stripCard { min-width: 260px; scroll-snap-align: start; }

    #timelineGrid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 12px;
    }

    /* Story modal */
    #storyModal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.86);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 18px;
    }
    #storyModal.open { display: flex; }
    .storyBox {
      width: min(980px, 100%);
      height: min(86vh, 820px);
      position: relative;
      border-radius: 18px;
      overflow: hidden;
      background: #000;
    }
    .storyBox img.back { width: 100%; height: 100%; object-fit: contain; display: block; background:#000; }
    .storyBox img.front {
      position: absolute; right: 16px; bottom: 16px;
      width: 120px; height: 160px; object-fit: cover;
      border-radius: 14px; border: 2px solid rgba(255,255,255,.95);
      box-shadow: 0 10px 22px rgba(0,0,0,.35);
      background: #222;
    }
    .storyTop {
      position: absolute; left: 0; right: 0; top: 0;
      padding: 12px 14px;
      display: flex; gap: 10px; align-items: center; justify-content: space-between;
      background: linear-gradient(to bottom, rgba(0,0,0,.75), rgba(0,0,0,0));
      color: #fff;
      font-size: 14px;
      z-index: 10;
      pointer-events: auto;
    }
    .storyLabel { font-weight: 600; }
    .storyMeta { opacity: .85; font-size: 13px; }
    .storyBtn {
      border: 1px solid rgba(255,255,255,.25);
      background: rgba(255,255,255,.12);
      color: #fff;
      padding: 8px 10px;
      border-radius: 999px;
      cursor: pointer;
    }
    .storyNav {
      z-index: 1;
      top: 64px;
      left: 0;
      right: 0;
      bottom: 0;
      position: absolute;
      display: grid;
      grid-template-columns: 1fr 1fr;
    }
    .storyNav div { cursor: pointer; }
    .hint { color:#666; font-size: 12px; }

    /* ===== New Favorites Modes Styling ===== */

    /* Highlight Reel modal */
    #reelModal{
      position: fixed;
      inset: 0;
      display:none;
      align-items:center;
      justify-content:center;
      z-index: 10000;
      background: rgba(0,0,0,.92);
      padding: 18px;
    }
    #reelModal.open{ display:flex; }
    .reelBox{
      width: min(980px, 100%);
      height: min(86vh, 820px);
      border-radius: 18px;
      overflow:hidden;
      background:#000;
      position: relative;
    }
    .reelMedia{
      position:absolute; inset:0;
      overflow:hidden;
      background:#000;
    }
    .reelMedia img.back{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit: cover;
      transform-origin: center;
      animation: kb 8s linear forwards;
      opacity: 0;
      transition: opacity .45s ease;
    }
    .reelMedia img.back.show{ opacity: 1; }
    @keyframes kb {
      from { transform: scale(1) translate(0,0); }
      to   { transform: scale(1.08) translate(-2%, -2%); }
    }
    .reelMedia img.front{
      position:absolute; right: 16px; bottom: 16px;
      width: 120px; height: 160px;
      object-fit: cover;
      border-radius: 14px; border: 2px solid rgba(255,255,255,.95);
      box-shadow: 0 10px 22px rgba(0,0,0,.35);
      background: #222;
      opacity: 0;
      transition: opacity .45s ease;
    }
    .reelMedia img.front.show{ opacity: 1; }
    .reelTop{
      position:absolute; left:0; right:0; top:0;
      padding: 12px 14px;
      display:flex; justify-content: space-between; gap: 10px; align-items:center;
      background: linear-gradient(to bottom, rgba(0,0,0,.78), rgba(0,0,0,0));
      color:#fff;
      z-index: 5;
    }
    .reelBottom{
      position:absolute; left:0; right:0; bottom:0;
      padding: 14px 16px;
      background: linear-gradient(to top, rgba(0,0,0,.78), rgba(0,0,0,0));
      color:#fff;
      z-index: 5;
    }
    .reelLabel{ font-weight: 650; font-size: 16px; opacity: 0; transition: opacity .35s ease; }
    .reelLabel.show{ opacity: 1; }
    .reelMeta{ opacity: .85; font-size: 13px; margin-top: 2px; }

    /* Museum wall */
    #museumWallWrap { display:none; }
    .wallToolbar { margin: 0 0 12px; }
    .museumWall{
      column-count: 4;
      column-gap: 14px;
    }
    @media (max-width: 1100px){ .museumWall{ column-count:3; } }
    @media (max-width: 820px){ .museumWall{ column-count:2; } }
    @media (max-width: 520px){ .museumWall{ column-count:1; } }

    .wallItem{
      break-inside: avoid;
      margin: 0 0 14px;
      border-radius: 14px;
      background: #fff;
      border: 1px solid #eee;
      box-shadow: 0 10px 24px rgba(0,0,0,.14);
      transform: rotate(var(--rot, 0deg));
      transition: transform .2s ease;
      overflow:hidden;
      cursor:pointer;
    }
    .wallItem.reduceMotion{ transform: none!important; transition: none!important; }
    .wallFrame{ position: relative; background:#000; }
    .wallFrame img.back{ width:100%; display:block; height:auto; }
    .wallFrame img.front{
      position:absolute; right: 10px; bottom: 10px;
      width: 90px; height: 120px;
      object-fit: cover;
      border-radius: 12px; border: 2px solid rgba(255,255,255,.95);
      box-shadow: 0 10px 18px rgba(0,0,0,.35);
      background: #222;
    }
    .placard{
      padding: 10px 12px;
      border-top: 1px solid #eee;
      font-size: 12px;
    }
    .placard .cap{ font-weight: 600; }
    .placard .date{ opacity:.75; margin-top: 2px; }

    /* Book Preview */
    #bookWrap{ display:none; gap: 14px; }
    #bookSidebar{
      width: 240px;
      min-width: 220px;
      border-right: 1px solid #eee;
      padding-right: 10px;
    }
    #bookSidebar .chapterBtn{
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 10px 10px;
      margin: 0 0 10px;
      cursor:pointer;
      background:#fff;
    }
    #bookSidebar .chapterBtn.active{
      background:#433924; color:#fff; border-color:#111;
    }
    #bookMain{ flex: 1; min-width: 0; }
    .bookControls{ display:flex; gap:10px; align-items:center; flex-wrap: wrap; margin: 0 0 12px; }
    .bookPage{
      background:#fff;
      border: 1px solid #eee;
      border-radius: 16px;
      padding: 22px;
      box-shadow: 0 12px 30px rgba(0,0,0,.12);
      max-width: 920px;
    }
    .bookGrid{
      display:grid;
      gap: 14px;
      grid-template-columns: repeat(2, minmax(0,1fr));
    }
    @media (max-width: 900px){ .bookGrid{ grid-template-columns: 1fr; } }
    .bookPhoto{
      border: 1px solid #eee;
      border-radius: 14px;
      overflow:hidden;
      background:#fafafa;
    }
    .bookPhoto .frame{
      height: 260px;
    }
    .bookCaption{
      padding: 10px 12px;
      font-size: 12px;
    }

    @media print{
      header, .tabs, .row, #view-timeline, #view-mosaic { display:none!important; }
      #view-favorites{ display:block!important; }
      #bookWrap{ display:block!important; }
      #bookSidebar, .bookControls{ display:none!important; }
      .bookPage{ box-shadow:none; border:none; padding: 0; }
      body{ margin: 0; }
    }

    /* Eras */
    #eraWrap{ display:none; }
    .eraTwoCol{ display:grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 920px){ .eraTwoCol{ grid-template-columns: 1fr; } }
    .eraCard{
      border: 1px solid #ddd;
      border-radius: 14px;
      padding: 12px;
      background:#fff;
    }
    .eraCard h3{ margin: 0 0 4px; font-size: 14px; }
    .eraCard .muted{ margin-top: 4px; }
    .eraListItem{
      border: 1px solid #eee;
      border-radius: 12px;
      padding: 10px;
      margin: 10px 0 0;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      background:#fafafa;
    }
    .eraWarn{ color:#b45309; font-size: 12px; }

    /* ===== Museum Wall v2 (classy frames + varied sizes) ===== */

    #museumWallWrap { display:none; }

    .museumWall {
    /* "gallery wall" background */
    padding: 18px;
    border-radius: 18px;
    background:
        radial-gradient(1200px 600px at 20% 0%, rgba(255,255,255,.10), transparent 60%),
        radial-gradient(900px 500px at 80% 20%, rgba(255,255,255,.08), transparent 60%),
        linear-gradient(180deg, #171717, #111);
    border: 1px solid rgba(255,255,255,.06);
    box-shadow: 0 18px 60px rgba(0,0,0,.35);
    overflow: hidden;
    }

    /* Use CSS grid for deliberate "wall" composition */
   .museumWallGrid {
        display: grid;
        gap: 26px;
        grid-auto-flow: dense;

        /* BIG frames */
        grid-template-columns: repeat(6, minmax(0, 1fr));
        }

        /* Responsive but still BIG */
        @media (max-width: 1200px) {
        .museumWallGrid {
            grid-template-columns: repeat(2, 1fr);
        }
        }
        @media (max-width: 800px) {
        .museumWallGrid {
            grid-template-columns: repeat(1, 1fr);
        }
        }

    /* MASSIVE hero statement pieces */
    .wallSize-hero {
    grid-column: span 4;
    grid-row: span 3;
    min-height: 1500px;
    }

    /* Big gallery anchors */
    .wallSize-large {
    grid-column: span 3;
    grid-row: span 2;
    min-height: 1000px;
    }

    /* Normal framed photos */
    .wallSize-medium {
    grid-column: span 2;
    grid-row: span 2;
    min-height: 900px;
    }

    /* Small accents (still readable) */
    .wallSize-small {
    grid-column: span 1;
    grid-row: span 1;
    min-height: 700px;
    }

    /* Rare minis */
    .wallSize-mini {
    grid-column: span 1;
    grid-row: span 1;
    min-height: 1000px;
    }


    /* Size variants */
    .wallSize-hero   { grid-column: span 6; grid-row: span 6; }
    .wallSize-large  { grid-column: span 4; grid-row: span 4; }
    .wallSize-medium { grid-column: span 3; grid-row: span 3; }
    .wallSize-small  { grid-column: span 2; grid-row: span 2; }
    .wallSize-mini   { grid-column: span 2; grid-row: span 1; }

    @media (max-width: 680px) {
    .wallSize-hero   { grid-column: span 6; grid-row: span 5; }
    .wallSize-large  { grid-column: span 4; grid-row: span 4; }
    .wallSize-medium { grid-column: span 3; grid-row: span 3; }
    .wallSize-small  { grid-column: span 3; grid-row: span 2; }
    .wallSize-mini   { grid-column: span 2; grid-row: span 1; }
    }

    /* The frame: wood/black options, matting, bevel */
    .wallFrame {
    position: relative;
    border-radius: 14px;
    cursor: pointer;
    transform: rotate(var(--rot, 0deg)) translateZ(0);
    transition: transform .22s ease, box-shadow .22s ease;
    box-shadow:
        0 24px 70px rgba(0,0,0,.35),
        0 10px 22px rgba(0,0,0,.25);
    }

    /* "Frame" layer (outer) */
    .wallFrame::before{
    content:"";
    position:absolute; inset:0;
    border-radius: 14px;
    background: var(--frameFill, linear-gradient(180deg, #2b2b2b, #0f0f0f));
    box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.08),
        inset 0 2px 10px rgba(255,255,255,.08),
        inset 0 -10px 18px rgba(0,0,0,.35);
    }

    /* "Mat" layer (inner) */
    .wallFrame::after{
    content:"";
    position:absolute;
    inset: 12px;
    border-radius: 10px;
    background: linear-gradient(180deg, #f3f1ea, #e9e5da);
    box-shadow:
        inset 0 0 0 1px rgba(0,0,0,.12),
        inset 0 12px 18px rgba(0,0,0,.06);
    }

    /* Inner content window */
    .wallWindow {
    position: relative;
    z-index: 2;
    margin: 22px;             /* mat thickness */
    border-radius: 10px;
    overflow: hidden;
    background: #000;
    box-shadow:
        0 0 0 1px rgba(0,0,0,.22),
        inset 0 0 0 1px rgba(255,255,255,.08);
    }

    /* Image fit */
    .wallWindow img.back {
    width: 100%;
    height: 100%;
    display:block;
    object-fit: cover;
    }

    /* little "BeReal front" inside the same framed piece */
    .wallWindow img.front{
    position:absolute;
    right: 10px;
    bottom: 10px;
    width: 26%;
    aspect-ratio: 3/4;
    object-fit: cover;
    border-radius: 10px;
    border: 2px solid rgba(255,255,255,.92);
    box-shadow: 0 12px 18px rgba(0,0,0,.40);
    background:#222;
    }

    /* Hover feel */
    .wallFrame:hover{
    transform: rotate(var(--rot, 0deg)) translateY(-2px);
    box-shadow:
        0 30px 90px rgba(0,0,0,.45),
        0 12px 28px rgba(0,0,0,.30);
    }

    /* Placard (gallery label) */
    .wallPlacard{
    margin-top: 8px;
    padding: 8px 10px;
    color: rgba(255,255,255,.92);
    font-size: 12px;
    letter-spacing: .2px;
    display:flex;
    flex-direction: column;
    gap: 2px;
    opacity: .92;
    }
    .wallPlacard .cap{
    font-weight: 650;
    }
    .wallPlacard .date{
    opacity: .75;
    font-size: 12px;
    }
    .wallWindow {
    position: relative;
    z-index: 2;
    margin: 16px;          /* ‚Üì was too thick */
    border-radius: 10px;
    overflow: hidden;
    background: #000;
    }
    .wallSize-hero .wallWindow {
        margin: 12px;
    }

    /* Reduce motion option */
    .wallReduceMotion .wallFrame { transform: none !important; transition: none !important; }
    .wallReduceMotion .wallFrame:hover { transform: none !important; }

  </style>
</head>
<body>
  <header>
    <h1>BeReal Museum (Posts)</h1>
    <input id="file" type="file" accept=".zip" />
    <span class="muted" id="status">Import a BeReal ZIP to begin. (Everything stays on this device.)</span>
  </header>

  <main>
    <div class="tabs">
      <div class="tab active" data-view="timeline">Timeline</div>
      <div class="tab" data-view="favorites">Favorites</div>
      <div class="tab" data-view="mosaic">Mosaic</div>
    </div>

    <!-- Timeline -->
    <section id="view-timeline">
      <div class="row" style="margin: 8px 0 10px;">
        <button class="btn" id="tlModeGrid" disabled>Grid</button>
        <button class="btn" id="tlModeStrip" disabled>Strip</button>
        <button class="btn" id="tlModeOnThisDay" disabled>On this day</button>

        <span style="flex:1"></span>

        <button class="btn" id="sortAsc" disabled>Sort: Old ‚Üí New</button>
        <button class="btn" id="sortDesc" disabled>Sort: New ‚Üí Old</button>

        <button class="btn" id="exportNotes" disabled>Export notes</button>
        <label class="btn" style="display:inline-block">
          Import notes
          <input id="importNotes" type="file" accept="application/json" style="display:none" />
        </label>

        <span class="muted" id="count"></span>
      </div>

      <div class="row" id="tlOnThisDayControls" style="display:none; margin: 0 0 12px;">
        <select id="tlMonthPick" class="btn">
          <option value="1">Jan</option><option value="2">Feb</option><option value="3">Mar</option><option value="4">Apr</option>
          <option value="5">May</option><option value="6">Jun</option><option value="7">Jul</option><option value="8">Aug</option>
          <option value="9">Sep</option><option value="10">Oct</option><option value="11">Nov</option><option value="12">Dec</option>
        </select>
        <select id="tlDayPick" class="btn"></select>
        <span class="hint">Shows posts taken on that month/day (across all years).</span>
      </div>

      <div id="timelineGrid"></div>
      <div id="timelineStrip" style="display:none"></div>
    </section>

    <!-- Favorites -->
    <section id="view-favorites" style="display:none">
      <div class="row" style="margin: 8px 0 10px;">
        <button class="btn" id="favModeGrid" disabled>Grid</button>
        <button class="btn" id="favModeStrip" disabled>Strip</button>
        <button class="btn" id="favModeStory" disabled>Story</button>
        <button class="btn" id="favModeRoulette" disabled>Roulette</button>
        <button class="btn" id="favModeOnThisDay" disabled>On this day</button>

        <!-- NEW -->
        <button class="btn" id="favModeReel" disabled>Highlight Reel</button>
        <button class="btn" id="favModeWall" disabled>Museum Wall</button>
        <button class="btn" id="favModeBook" disabled>Book Preview</button>
        <button class="btn" id="favModeEras" disabled>Eras</button>

        <button class="btn" id="exportFavorites" disabled>Export favorites</button>

        <span style="flex:1"></span>

        <select id="labelFilter" class="btn" disabled>
          <option value="">All labels</option>
        </select>

        <input id="labelSearch"
          placeholder="Search labels/text‚Ä¶"
          style="padding:8px 10px;border:1px solid #ddd;border-radius:10px;font-size:13px;min-width:220px"
          disabled />

        <span class="muted" id="favCount"></span>
      </div>

      <div class="row" id="onThisDayControls" style="display:none; margin: 0 0 12px;">
        <select id="monthPick" class="btn">
          <option value="1">Jan</option><option value="2">Feb</option><option value="3">Mar</option><option value="4">Apr</option>
          <option value="5">May</option><option value="6">Jun</option><option value="7">Jul</option><option value="8">Aug</option>
          <option value="9">Sep</option><option value="10">Oct</option><option value="11">Nov</option><option value="12">Dec</option>
        </select>
        <select id="dayPick" class="btn"></select>
        <span class="hint">Shows favorites taken on that month/day (across all years).</span>
      </div>

      <!-- Grid -->
      <div id="favoritesGrid" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 12px;"></div>

      <!-- Strip -->
      <div id="favoritesStrip" style="display:none"></div>

      <!-- Roulette -->
      <div id="rouletteWrap" style="display:none">
        <div class="row" style="margin: 0 0 12px;">
          <button class="btn" id="rouletteSpin" disabled>Spin üé∞</button>
          <span class="hint">Rapid shuffle ‚Üí slow down ‚Üí lands on a favorite.</span>
        </div>
        <div id="rouletteStage"></div>
      </div>

      <!-- NEW: Museum Wall -->
      <div id="museumWallWrap">
        <div class="row wallToolbar">
          <button class="btn" id="wallRegenerate">Regenerate layout</button>
          <label class="btn" style="display:inline-flex; gap:8px; align-items:center;">
            <input id="wallReduceMotion" type="checkbox" />
            Reduce motion
          </label>
          <span class="hint">Click a frame to open Story view.</span>
        </div>
        <div id="museumWall" class="museumWall"></div>
      </div>

      <!-- NEW: Book Preview -->
      <div id="bookWrap">
        <div id="bookSidebar"></div>
        <div id="bookMain">
          <div class="bookControls">
            <button class="btn" id="bookPrev">‚Üê Prev page</button>
            <button class="btn" id="bookNext">Next page ‚Üí</button>
            <span class="muted" id="bookPageInfo"></span>
            <span style="flex:1"></span>
            <button class="btn" id="bookPrint">Print / Save as PDF</button>
            <span class="hint">Tip: Use your browser‚Äôs ‚ÄúSave as PDF‚Äù.</span>
          </div>
          <div id="bookPageHost"></div>
        </div>
      </div>

      <!-- NEW: Eras -->
      <div id="eraWrap">
        <div class="eraTwoCol">
          <div class="eraCard">
            <h3>Manage Eras</h3>
            <div class="muted">Eras are stored in localStorage under <code>bereal_eras</code>.</div>
            <div class="row" style="margin-top:10px;">
              <input id="eraName" class="btn" style="flex:1; min-width: 220px;" placeholder="Era name (e.g., College)" />
              <input id="eraStart" class="btn" type="date" />
              <input id="eraEnd" class="btn" type="date" />
              <button class="btn" id="eraAdd">Add</button>
            </div>
            <div id="eraWarnings" class="eraWarn" style="margin-top:10px;"></div>
            <div id="eraList"></div>
          </div>

          <div class="eraCard">
            <div class="row" style="justify-content: space-between;">
              <div>
                <h3 style="margin:0;">Era Gallery</h3>
                <div class="muted" id="eraGalleryHint">Click an era to browse favorites in it.</div>
              </div>
              <label class="btn" style="display:inline-flex; gap:8px; align-items:center;">
                <input id="eraFilterAffects" type="checkbox" checked />
                Filters affect eras
              </label>
            </div>
            <div id="eraGallery" style="margin-top:10px;"></div>
            <div id="eraBrowse" style="margin-top:10px; display:none;">
              <div class="row" style="margin:0 0 10px;">
                <button class="btn" id="eraBack">‚Üê Back to eras</button>
                <span class="muted" id="eraBrowseTitle"></span>
              </div>
              <div id="eraBrowseGrid" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 12px;"></div>
            </div>
          </div>
        </div>
      </div>

    </section>

    <!-- Story modal -->
    <div id="storyModal">
      <div class="storyBox" id="storyBox">
        <div class="storyTop">
          <div>
            <div class="storyLabel" id="storyLabel"></div>
            <div class="storyMeta" id="storyMeta"></div>
          </div>
          <div class="row">
            <button class="storyBtn" id="storyPrev">‚Üê</button>
            <button class="storyBtn" id="storyNext">‚Üí</button>
            <button class="storyBtn" id="storyClose">‚úï</button>
          </div>
        </div>

        <img class="back" id="storyBack" />
        <img class="front" id="storyFront" />

        <!-- click left/right to navigate -->
        <div class="storyNav">
          <div id="storyNavLeft" title="Previous"></div>
          <div id="storyNavRight" title="Next"></div>
        </div>
      </div>
    </div>

    <!-- NEW: Highlight Reel modal -->
    <div id="reelModal">
      <div class="reelBox">
        <div class="reelTop">
          <div class="row" style="gap:8px;">
            <button class="storyBtn" id="reelPrev">‚Üê</button>
            <button class="storyBtn" id="reelPlay">‚è∏</button>
            <button class="storyBtn" id="reelNext">‚Üí</button>
            <select class="storyBtn" id="reelSpeed">
              <option value="2000">2s</option>
              <option value="3000" selected>3s</option>
              <option value="4000">4s</option>
            </select>
            <label class="storyBtn" style="display:inline-flex; gap:8px; align-items:center;">
              <input id="reelShowLabels" type="checkbox" checked />
              Labels
            </label>
            <label class="storyBtn" style="display:inline-flex; gap:8px; align-items:center;">
              <input id="reelMusic" type="checkbox" />
              Music
            </label>
          </div>
          <button class="storyBtn" id="reelClose">‚úï</button>
        </div>

        <div class="reelMedia">
          <img class="back" id="reelBack" />
          <img class="front" id="reelFront" />
        </div>

        <div class="reelBottom">
          <div class="reelLabel" id="reelLabel"></div>
          <div class="reelMeta" id="reelMeta"></div>
        </div>
      </div>
    </div>

    <!-- Mosaic -->
    <section id="view-mosaic" style="display:none">
      <div class="row" style="margin: 8px 0 14px;">
        <button class="btn" id="buildMosaic" disabled>Build mosaic</button>
        <button class="btn" id="shuffleMosaic" disabled>Shuffle</button>
        <span class="muted">Scroll to zoom ‚Ä¢ Drag to pan</span>
      </div>
      <div id="mosaicWrap">
        <canvas id="mosaic"></canvas>
      </div>
    </section>

  </main>

  <script type="module" src="./app.js"></script>
</body>
</html>
